<header id="top-page-header" class="green-header">
  <div class="header-upper clearfix">
    <div class="header-upper-left">
      <h1 class="logo">
        <%= link_to image_tag('binder_logo.png'), root_path %>
      </h1>
    </div>
    <div class="header-upper-right">
      <nav class="header-menu">
        <ul>
          <% if user_signed_in? %>
            <li class="menu-item new-post-button-wrapper">
              <%= link_to "New post", posts_path, method: :post, class: "new-post-button" %>
            </li>
            <li class="menu-item">
              <%= content_tag :div,
                id: "action-bar-config-app",
                data: {
                  name: current_user.name,
                  username: current_user.username,
                  destroySessionPath: destroy_user_session_path,
                }.to_json do %>
              <% end %>
            </li>
            <li class="menu-item">
              <%= content_tag :div,
                id: "action-bar-notification-app",
                data: {
                  userId: current_user.id,
                  hasUncheckedNotifications: current_user.has_unchecked_notifications,
                }.to_json do %>
              <% end %>
            </li>
            <li class="menu-item profile-window">
              <%= link_to image_tag(current_user.image_url), "/@#{current_user.username}" %>
            </li>
          <% else %>
            <li class="menu-item">
              <%= content_tag :div,
                class: "login-popup-app",
                data: {
                  facebookAuthPath: user_facebook_omniauth_authorize_path,
                  twitterAuthPath: user_twitter_omniauth_authorize_path,
                  logoImage: image_url("binder_only_text.png"),
                  buttonId: "signin-button",
                  modelMode: "signin"
                }.to_json do %>
              <% end %>
            </li>
            <li class="menu-item">
              <%= content_tag :div,
                class: "login-popup-app",
                data: {
                  facebookAuthPath: user_facebook_omniauth_authorize_path,
                  twitterAuthPath: user_twitter_omniauth_authorize_path,
                  logoImage: image_url("binder_only_text.png"),
                  buttonId: "signup-button",
                  modalMode: "signup"
                }.to_json do %>
              <% end %>
            </li>
          <% end %>
        </ul>
      </nav>
    </div>
  </div>
</header>
